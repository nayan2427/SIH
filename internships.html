<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Internships - InternshipHub</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-briefcase"></i>
                <span>InternshipHub</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="{{ url_for('index') }}" class="nav-link">Home</a>
                <a href="{{ url_for('internships') }}" class="nav-link">Internships</a>
                {% if session.user_id %}
                    <a href="{{ url_for('dashboard') }}" class="nav-link">Dashboard</a>
                    <a href="{{ url_for('profile') }}" class="nav-link">Profile</a>
                    <a href="{{ url_for('logout') }}" class="nav-link">Logout</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="nav-link">Login</a>
                    <a href="{{ url_for('register') }}" class="nav-link btn-primary">Sign Up</a>
                {% endif %}
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Internships Section -->
    <section class="featured-internships" style="padding: 120px 0 80px;">
        <div class="container">
            <div class="section-header">
                <h1 class="section-title">Browse Internships</h1>
                <p class="section-description">Find the perfect internship opportunity for your career</p>
            </div>

            <!-- Filters -->
            <div class="filters-container" style="background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); margin-bottom: 3rem;">
                <form method="GET" action="{{ url_for('internships') }}" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; align-items: end;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="search">Search</label>
                        <input type="text" id="search" name="search" value="{{ search }}" placeholder="Search internships...">
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="company_type">Company Type</label>
                        <select id="company_type" name="company_type">
                            <option value="all" {% if company_type == 'all' %}selected{% endif %}>All Types</option>
                            <option value="trust" {% if company_type == 'trust' %}selected{% endif %}>Trust Companies</option>
                            <option value="government" {% if company_type == 'government' %}selected{% endif %}>Government</option>
                            <option value="private" {% if company_type == 'private' %}selected{% endif %}>Private</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="category">Category</label>
                        <select id="category" name="category">
                            <option value="all" {% if category == 'all' %}selected{% endif %}>All Categories</option>
                            <option value="Technology" {% if category == 'Technology' %}selected{% endif %}>Technology</option>
                            <option value="Business" {% if category == 'Business' %}selected{% endif %}>Business</option>
                            <option value="Research" {% if category == 'Research' %}selected{% endif %}>Research</option>
                            <option value="Healthcare" {% if category == 'Healthcare' %}selected{% endif %}>Healthcare</option>
                            <option value="Education" {% if category == 'Education' %}selected{% endif %}>Education</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 0;">
                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <i class="fas fa-search"></i>
                            Filter
                        </button>
                    </div>
                </form>
            </div>

            <!-- Results Count -->
            <div style="margin-bottom: 2rem;">
                <p style="color: #666;">
                    Showing {{ internships.items|length }} of {{ internships.total }} internships
                    {% if search %}for "{{ search }}"{% endif %}
                    {% if company_type != 'all' %}in {{ company_type.title() }} companies{% endif %}
                    {% if category != 'all' %}in {{ category }} category{% endif %}
                </p>
            </div>

            <!-- Internships Grid -->
            {% if internships.items %}
                <div class="internships-grid">
                    {% for internship in internships.items %}
                    <div class="internship-card">
                        <div class="internship-header">
                            <div class="company-logo">
                                <i class="fas fa-building"></i>
                            </div>
                            <div class="internship-meta">
                                <span class="company-type {{ internship.company_type }}">{{ internship.company_type.title() }}</span>
                                <span class="duration">{{ internship.duration }}</span>
                            </div>
                        </div>
                        <div class="internship-content">
                            <h3 class="internship-title">{{ internship.title }}</h3>
                            <p class="company-name">{{ internship.company }}</p>
                            <p class="internship-description">{{ internship.description[:150] }}...</p>
                            <div class="internship-details">
                                <span class="location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    {{ internship.location }}
                                </span>
                                <span class="stipend">
                                    <i class="fas fa-rupee-sign"></i>
                                    {{ internship.stipend or 'Unpaid' }}
                                </span>
                            </div>
                            <div class="internship-details">
                                <span class="category">
                                    <i class="fas fa-tag"></i>
                                    {{ internship.category }}
                                </span>
                                <span class="start-date">
                                    <i class="fas fa-calendar"></i>
                                    Starts {{ internship.start_date.strftime('%d %b %Y') }}
                                </span>
                            </div>
                        </div>
                        <div class="internship-footer">
                            <span class="deadline">
                                <i class="fas fa-clock"></i>
                                Apply by {{ internship.application_deadline.strftime('%d %b %Y') }}
                            </span>
                            <a href="{{ url_for('internship_detail', internship_id=internship.id) }}" class="btn btn-outline">
                                View Details
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <!-- Pagination -->
                {% if internships.pages > 1 %}
                <div class="pagination" style="display: flex; justify-content: center; gap: 1rem; margin-top: 3rem;">
                    {% if internships.has_prev %}
                        <a href="{{ url_for('internships', page=internships.prev_num, search=search, company_type=company_type, category=category) }}" class="btn btn-outline">
                            <i class="fas fa-chevron-left"></i>
                            Previous
                        </a>
                    {% endif %}
                    
                    <span style="display: flex; align-items: center; padding: 0.75rem 1.5rem; color: #666;">
                        Page {{ internships.page }} of {{ internships.pages }}
                    </span>
                    
                    {% if internships.has_next %}
                        <a href="{{ url_for('internships', page=internships.next_num, search=search, company_type=company_type, category=category) }}" class="btn btn-outline">
                            Next
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    {% endif %}
                </div>
                {% endif %}
            {% else %}
                <div style="text-align: center; padding: 4rem 2rem;">
                    <i class="fas fa-search" style="font-size: 4rem; color: #cbd5e0; margin-bottom: 1rem;"></i>
                    <h3 style="color: #4a5568; margin-bottom: 1rem;">No internships found</h3>
                    <p style="color: #666; margin-bottom: 2rem;">Try adjusting your search criteria or browse all internships</p>
                    <a href="{{ url_for('internships') }}" class="btn btn-primary">
                        <i class="fas fa-refresh"></i>
                        Reset Filters
                    </a>
                </div>
            {% endif %}
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-briefcase"></i>
                        <span>InternshipHub</span>
                    </div>
                    <p>Connecting students with verified internship opportunities from trusted companies and government organizations.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 InternshipHub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
