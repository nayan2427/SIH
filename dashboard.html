<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - InternshipHub</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-briefcase"></i>
                <span>InternshipHub</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="{{ url_for('index') }}" class="nav-link">Home</a>
                <a href="{{ url_for('internships') }}" class="nav-link">Internships</a>
                <a href="{{ url_for('profile') }}" class="nav-link">Profile</a>
                <a href="{{ url_for('logout') }}" class="nav-link">Logout</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1 class="dashboard-title">Welcome back, {{ user.name }}!</h1>
            <p class="dashboard-subtitle">Here's what's happening with your internship applications</p>
        </div>

        <div class="dashboard-grid">
            <!-- Recent Applications -->
            <div class="dashboard-card">
                <h2 class="card-title">Recent Applications</h2>
                {% if applications %}
                    {% for application in applications %}
                    <div class="application-item">
                        <div class="application-info">
                            <h4>{{ application.internship.title }}</h4>
                            <p>{{ application.internship.company }} â€¢ Applied {{ application.applied_at.strftime('%d %b %Y') }}</p>
                        </div>
                        <span class="application-status {{ application.status }}">{{ application.status.title() }}</span>
                    </div>
                    {% endfor %}
                {% else %}
                    <p style="color: #666; text-align: center; padding: 2rem;">No applications yet. <a href="{{ url_for('internships') }}" style="color: #667eea;">Browse internships</a> to get started!</p>
                {% endif %}
            </div>

            <!-- Profile Status -->
            <div class="dashboard-card">
                <h2 class="card-title">Profile Status</h2>
                <div class="profile-status">
                    <div class="status-item">
                        <i class="fas fa-user" style="color: #10b981;"></i>
                        <span>Profile Created</span>
                    </div>
                    {% if user.aadhar_verified %}
                    <div class="status-item">
                        <i class="fas fa-shield-alt" style="color: #10b981;"></i>
                        <span>Aadhar Verified</span>
                    </div>
                    {% else %}
                    <div class="status-item">
                        <i class="fas fa-exclamation-triangle" style="color: #f59e0b;"></i>
                        <span>Aadhar Not Verified</span>
                    </div>
                    {% endif %}
                    {% if user.is_verified %}
                    <div class="status-item">
                        <i class="fas fa-check-circle" style="color: #10b981;"></i>
                        <span>Profile Verified</span>
                    </div>
                    {% else %}
                    <div class="status-item">
                        <i class="fas fa-clock" style="color: #6b7280;"></i>
                        <span>Pending Verification</span>
                    </div>
                    {% endif %}
                </div>
                <div style="margin-top: 1.5rem;">
                    <a href="{{ url_for('profile') }}" class="btn btn-outline" style="width: 100%;">
                        <i class="fas fa-edit"></i>
                        Update Profile
                    </a>
                </div>
            </div>
        </div>

        <!-- Recommended Internships -->
        <div class="dashboard-card">
            <h2 class="card-title">Recommended for You</h2>
            <p style="color: #666; margin-bottom: 2rem;">Based on your field of study: {{ user.field_of_study }}</p>
            
            {% if recommended %}
                <div class="internships-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                    {% for internship in recommended %}
                    <div class="internship-card">
                        <div class="internship-header">
                            <div class="company-logo">
                                <i class="fas fa-building"></i>
                            </div>
                            <div class="internship-meta">
                                <span class="company-type {{ internship.company_type }}">{{ internship.company_type.title() }}</span>
                                <span class="duration">{{ internship.duration }}</span>
                            </div>
                        </div>
                        <div class="internship-content">
                            <h3 class="internship-title">{{ internship.title }}</h3>
                            <p class="company-name">{{ internship.company }}</p>
                            <p class="internship-description">{{ internship.description[:100] }}...</p>
                            <div class="internship-details">
                                <span class="location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    {{ internship.location }}
                                </span>
                                <span class="stipend">
                                    <i class="fas fa-rupee-sign"></i>
                                    {{ internship.stipend or 'Unpaid' }}
                                </span>
                            </div>
                        </div>
                        <div class="internship-footer">
                            <span class="deadline">
                                <i class="fas fa-clock"></i>
                                Apply by {{ internship.application_deadline.strftime('%d %b %Y') }}
                            </span>
                            <a href="{{ url_for('internship_detail', internship_id=internship.id) }}" class="btn btn-outline">
                                View Details
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="color: #666; text-align: center; padding: 2rem;">No recommendations available. <a href="{{ url_for('internships') }}" style="color: #667eea;">Browse all internships</a></p>
            {% endif %}
        </div>

        <!-- Quick Actions -->
        <div class="dashboard-card">
            <h2 class="card-title">Quick Actions</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                <a href="{{ url_for('internships') }}" class="btn btn-primary" style="text-align: center; padding: 1rem;">
                    <i class="fas fa-search"></i>
                    Browse Internships
                </a>
                <a href="{{ url_for('profile') }}" class="btn btn-secondary" style="text-align: center; padding: 1rem;">
                    <i class="fas fa-user-edit"></i>
                    Edit Profile
                </a>
                <a href="{{ url_for('internships') }}?company_type=government" class="btn btn-outline" style="text-align: center; padding: 1rem;">
                    <i class="fas fa-landmark"></i>
                    Government Jobs
                </a>
                <a href="{{ url_for('internships') }}?company_type=trust" class="btn btn-outline" style="text-align: center; padding: 1rem;">
                    <i class="fas fa-handshake"></i>
                    Trust Companies
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-briefcase"></i>
                        <span>InternshipHub</span>
                    </div>
                    <p>Connecting students with verified internship opportunities from trusted companies and government organizations.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 InternshipHub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
